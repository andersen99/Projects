<!DOCTYPE html>
<html>
<title>Guest Account</title>
<body onload = "initialize()">
<h1>Welcome Guest</h1>
<h2>Profile</h2>

<textarea id = "profile" rows = "4" cols = "25">
</textarea>
<form id = "up">
  Update Profile: <br><input type="text" name="info" required><br>
  <input id = "gButton" type="submit" name="action" onclick = "upGuest()"value="Update Username"><br>
  <input id = "pButton" type="submit" name="action" onclick = "upPword()"value="Update Password"><br>
  <input id = "fButton" type="submit" name="action" onclick = "upFirst()" value="Update First Name"><br>
  <input id = "lButton" type="submit" name="action" onclick = "upLast()"value="Update Last Name"><br>
</form>
<div><form action = "../../guest" method = "Post">
<input type = "submit" name = "action" value = "Logout">
</form>
</div>
<h3>Room Availability and Reservations</h3>
<div><a href = "http://localhost:8085/ReservationSystem/Hotel Reservations/User Main/OpenRooms.html">Check Availability</a></div>
<h3>To raise an issue click below</h3>
<div><a href = "http://localhost:8085/ReservationSystem/Hotel Reservations/User Main/RaiseIssue.html">Raise an issue</a></div>
<script>
function initialize(){
	let xhr = new XMLHttpRequest();
	xhr.onreadystatechange = function() {
		if(this.readyState == 4) {
			if (this.status == 200) {
				document.getElementById("profile").innerHTML = xhr.responseText;
			} 
			else {
				alert("error" + this.status);
			}
		}
	}	
	xhr.open("POST","../../../ReservationSystem/guest");
	xhr.send();
}
function upGuest(){
	let button = document.getElementById("gButton").value;
	let info = document.forms["up"]["info"].value;
	var data =  "info=" + encodeURIComponent(info) + "&action=" + encodeURIComponent(button);
	let xhr = new XMLHttpRequest();
	xhr.onreadystatechange = function() {
		if(this.readyState == 4) {
			if (this.status == 200) {
				document.getElementById("profile").innerHTML = xhr.responseText;
			} else {
				alert("error" + this.status);
			}
		}
	}	
	xhr.open("POST","../../../ReservationSystem/guest");
	xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded");
	xhr.send(data);
}
function upPword(){
	let button = document.getElementById("pButton").value;
	let info = document.forms["up"]["info"].value;
	var data =  "info=" + encodeURIComponent(info) + "&action=" + encodeURIComponent(button);
	let xhr = new XMLHttpRequest();
	xhr.onreadystatechange = function() {
		if(this.readyState == 4) {
			if (this.status == 200) {
				document.getElementById("profile").innerHTML = xhr.responseText;
			} else {
				alert("error" + this.status);
			}
		}
	}	
	xhr.open("POST","../../../ReservationSystem/guest");
	xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded");
	xhr.send(data);
}
function upFirst(){
	let button = document.getElementById("fButton").value;
	let info = document.forms["up"]["info"].value;
	var data =  "info=" + encodeURIComponent(info) + "&action=" + encodeURIComponent(button);
	let xhr = new XMLHttpRequest();
	xhr.onreadystatechange = function() {
		if(this.readyState == 4) {
			if (this.status == 200) {
				document.getElementById("profile").innerHTML = xhr.responseText;
			} else {
				alert("error" + this.status);
			}
		}
	}	
	xhr.open("POST","../../../ReservationSystem/guest");
	xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded");
	xhr.send(data);
}
function upLast(){
	let button = document.getElementById("lButton").value;
	let info = document.forms["up"]["info"].value;
	var data =  "info=" + encodeURIComponent(info) + "&action=" + encodeURIComponent(button);
	let xhr = new XMLHttpRequest();
	xhr.onreadystatechange = function() {
		if(this.readyState == 4) {
			if (this.status == 200) {
				document.getElementById("profile").innerHTML = xhr.responseText;
			} else {
				alert("error" + this.status);
			}
		}
	}	
	xhr.open("POST","../../../ReservationSystem/guest");
	xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded");
	xhr.send(data);
}
</script>
</body>
</html>